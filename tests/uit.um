
import (
	"rect.um"
	"signal.um"
	"window.um"
	"ui.um"
)

var gui: ui.Gui

fn init*() {
	window.setup("gui test", 200, 200)

	gui = ui.mk(rect.mk(0, 0, 200, 200))

	window.onFrame.register(signal.Callback{
		layout := ui.LayoutFn{
			gui.box(ui.BoxConfig{
				dimension: 30,
				growType: ui.BoxGrowDimension,
				dir: ui.BoxDirectionUp })
			{
				gui.box(ui.BoxConfig{
					subdivisions: 3,
					growType: ui.BoxGrowSubdivision,
					dir: ui.BoxDirectionRight })
				{
					for i := 0; i < 3; i++ {
						if gui.qbutton(sprintf("Button %d", i+1)) {
							printf("click %d\n", i+1)
						}
					}
				}
				gui.popContainer()

				gui.pushRect(rect.mk(0, 0, 0, 2))
				gui.label("I'm just a label", ui.LabelConfig{
					scale: 1,
					centerX: true })
				gui.pushRect(rect.mk(0, 0, 0, 2))

				if gui.qbutton("Next row button.") {
					printf("click next row button\n")
				}
			}
			gui.popContainer()
		}

		gui.eval(layout)
		gui.draw(layout)
	}, null)
}
